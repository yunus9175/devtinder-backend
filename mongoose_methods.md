Model methods
Model.find(filter)
Example: await User.find({ age: { $gte: 18 } })
Model.findOne(filter)
Example: await User.findOne({ email: 'a@b.com' })
Model.findById(id)
Example: await User.findById(id)
Model.findByIdAndUpdate(id, update, options)
Example: await User.findByIdAndUpdate(id, { age: 30 }, { new: true })
Model.findByIdAndDelete(id)
Example: await User.findByIdAndDelete(id)
Model.findByIdAndRemove(id)
Example: await User.findByIdAndRemove(id) // alias of delete in many cases
Model.findOneAndUpdate(filter, update, options)
Example: await User.findOneAndUpdate({ email: 'a@b.com' }, { name: 'New' }, { new: true })
Model.findOneAndDelete(filter)
Example: await User.findOneAndDelete({ email: 'a@b.com' })
Model.findOneAndRemove(filter)
Example: await User.findOneAndRemove({ email: 'a@b.com' })
Model.create(doc(s))
Example: const u = await User.create({ name: 'Amy', age: 25 })
Model.insertMany(array)
Example: await User.insertMany([{ name: 'A' }, { name: 'B' }])
Model.updateOne(filter, update, options)
Example: await User.updateOne({ _id: id }, { $inc: { age: 1 } })
Model.updateMany(filter, update, options)
Example: await User.updateMany({ age: { $lt: 18 } }, { $set: { minor: true } })
Model.replaceOne(filter, doc, options)
Example: await User.replaceOne({ _id: id }, { name: 'Replaced', age: 40 })
Model.deleteOne(filter)
Example: await User.deleteOne({ email: 'x@x.com' })
Model.deleteMany(filter)
Example: await User.deleteMany({ inactive: true })
Model.countDocuments(filter)
Example: const n = await User.countDocuments({ age: { $gte: 18 } })
Model.estimatedDocumentCount()
Example: const total = await User.estimatedDocumentCount()
Model.distinct(field, filter)
Example: const emails = await User.distinct('email', {})
Model.exists(filter)
Example: const doesExist = await User.exists({ email: 'a@b.com' })
Model.aggregate(pipeline)
Example: await User.aggregate([{ $match: { age: { $gte: 18 } } }, { $group: { _id: null, avgAge: { $avg: "$age" } } }])
Model.bulkWrite(ops)
Example:
  await User.bulkWrite([
{ updateOne: { filter: { email: 'a' }, update: { $set: { age: 1 } }, upsert: true } },
{ deleteOne: { filter: { email: 'z' } } }
  ])
Model.watch(pipeline, options)
Example: const changeStream = User.watch(); changeStream.on('change', console.log)
Model.createCollection()
Example: await User.createCollection()
Document (instance) methods
new User(doc).save()
Example: const user = new User({ name: 'Bob' }); await user.save()
document.remove()
Example: await user.remove()
document.updateOne(update, options)
Example: await user.updateOne({ $set: { age: 33 } })
document.validate()
Example: await user.validate()
document.toObject([options])
Example: const pojo = user.toObject()
document.toJSON([options])
Example: const json = user.toJSON()
document.populate(path or options)
Example: await user.populate('friends').execPopulate() (or await user.populate('friends'))
Query methods (chainable)
Model.find(...).where(path)
Example: await User.find().where('age').gte(18).lte(30)
.select(fields) / .projection()
Example: await User.find().select('name email')
.sort(sort)
Example: await User.find().sort({ age: -1 })
.limit(n)
Example: await User.find().limit(10)
.skip(n)
Example: await User.find().skip(20)
.lean([bool])
Example: await User.find().lean() // returns plain JS objects
.exec()
Example: await User.find({}).exec()
.count() (deprecated â€” prefer countDocuments)
Example: await User.countDocuments({})
.or(arrayOfFilters)
Example: await User.find().or([{ name: 'A' }, { age: 20 }])
.and(arrayOfFilters)
Example: await User.find().and([{ age: { $gte: 18 } }, { active: true }])
.nor(arrayOfFilters)
Example: await User.find().nor([{ banned: true }])
.regex(path, regex)
Example: await User.find().where('name').regex(/^A/)
.setOptions(options)
Example: await User.find().setOptions({ lean: true }).exec()
.cursor()
Example: const cursor = User.find().cursor(); for (let doc = await cursor.next(); doc != null; doc = await cursor.next()) { ... }
Population
Model.find(...).populate(path, [fields]) Example: await User.find().populate('friends', 'name email')
Transactions & Sessions (with session)
session.startTransaction(), session.commitTransaction(), session.abortTransaction() Example: const session = await mongoose.startSession(); await session.withTransaction(async () => { await User.updateOne({ _id: id }, { $inc: { age: 1 } }, { session }); });
Schema & index related
schema.pre/hook and schema.post
Example: schema.pre('save', function(next) { ...; next(); })
schema.index(spec, options)
Example: schema.index({ email: 1 }, { unique: true })
Other useful utilities
mongoose.connect(uri, options)
Example: await mongoose.connect('mongodb://localhost/db')
mongoose.model(name, schema)
Example: const M = mongoose.model('M', schema)
mongoose.Schema.Types (ObjectId, String, Date, Buffer, Number, Boolean, etc.)
Example: const schema = new mongoose.Schema({ owner: mongoose.Schema.Types.ObjectId })
Quick pattern examples
Find and return updated doc:
await User.findByIdAndUpdate(id, { $set: { name: 'X' } }, { new: true })
Upsert:
await User.updateOne({ email }, { $set: { name } }, { upsert: true })
Pagination:
const page = 2, limit = 20;
const docs = await User.find().skip((page-1)*limit).limit(limit)
